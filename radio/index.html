<!DOCTYPE html>
<html>
<head>
    <title>modular.live</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        body, html {
            height: 100%; /* Full height */
            margin: 0; /* Remove default margin */
            display: flex; /* Use flexbox */
            overflow: hidden;
            justify-content: center;
            align-items: center; /* Center vertically */
        }
        .dot {
            fill: black; /* Dot color */
            transition: fill 0.6s ease-in-out; /* Smooth transition for fill color */
        }
        #factorization-diagram {
            width: 600px; /* Width of the SVG element for a larger view */
            height: 600px; /* Height of the SVG element for a larger view */
            animation: spin 25s linear infinite; /* Add rotation animation */
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Keyframes for pulsing animation */
        @keyframes pulse {
            0%, 100% {
                r: 3;
            }
            50% {
                r: 6; /* Increase radius to create a pulse effect */
            }
        }
    </style>
</head>
<body>
  
<div id="factorization-diagram"></div>
<script>
    const number = 125; // Number to create the diagram for
    const factors = [5, 5, 5]; // This represents the factorization of 125 as 5^3

    const width = 600, // Width of the SVG element for a larger view
          height = 600, // Height of the SVG element for a larger view
          outerRadius = 200, // Radius for the large cluster
          innerRadius = 50, // Radius for the smaller clusters
          dotRadius = 8; // Radius for each dot

    const svg = d3.select("#factorization-diagram")
                  .append("svg")
                  .attr("width", width)
                  .attr("height", height)
                  .style("transform-origin", "center"); // Ensure rotation is around the center

    // Function to calculate the positions of the groups in a circle
    function calculatePositions(radius, count, startAngle = 0) {
        const positions = [];
        for (let i = 0; i < count; i++) {
            const angle = (i / count) * (2 * Math.PI) + startAngle; // Angle for the current element
            const x = radius * Math.cos(angle);
            const y = radius * Math.sin(angle);
            positions.push({x: x, y: y});
        }
        return positions;
    }

    // Calculate positions for the outer groups
    const outerGroupPositions = calculatePositions(outerRadius, factors[0]);

    outerGroupPositions.forEach((outerGroupPos, i) => {
        // Calculate positions for the inner groups within the current outer group
        const innerGroupPositions = calculatePositions(innerRadius, factors[1], Math.PI / factors[1]);

        innerGroupPositions.forEach((innerGroupPos, j) => {
            const group = svg.append("g")
                             .attr("transform", `translate(${width / 2 + outerGroupPos.x + innerGroupPos.x}, ${height / 2 - outerGroupPos.y - innerGroupPos.y})`);
            
            // Draw the dots with pulse animation
            const dotPositions = calculatePositions(dotRadius * 2.5, factors[2]);
            dotPositions.forEach((dotPos, k) => {
                const dot = group.append("circle")
                                 .attr("class", "dot")
                                 .attr("cx", dotPos.x) // Position relative to the group
                                 .attr("cy", dotPos.y) // Position relative to the group
                                 .attr("r", dotRadius);

                // Apply the pulse animation indefinitely
                dot.style("animation", "pulse 2.5s infinite ease-in-out");
            });
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const apiKey = 'AIzaSyC0MjAiEkS8MDBp_Mm9qcw-V8wt5QbXFPI'; // Replace with your actual API key
        const channelId = 'UCXwQ7RZ8pBb4KO-_MI2ff2w'; // Your channel ID
        const apiUrl = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${channelId}&type=video&eventType=live&key=${apiKey}`;
    
        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                if (data.items.length > 0) {
                    // If there is a live video, redirect to live.html
                    window.location.href = 'live.html';
                } else {
                    // No live video, you can handle this case as needed
                    console.log('No live stream currently.');
                }
            })
            .catch(error => console.error('Error fetching live stream status:', error));
    });
    </script>
    

</body>
</html>
